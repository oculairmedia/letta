{"id":"letta-repo-03g","title":"feat(webhooks): Add tool.created, tool.updated, tool.deleted webhook events","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T20:00:02.510290609Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:02.510290609Z"}
{"id":"letta-repo-0bd","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:04:23.657700722Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:34.495089446Z","comments":[{"id":53,"issue_id":"letta-repo-0bd","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T03:04:23Z"}]}
{"id":"letta-repo-0vw","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:48:37.511444601Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:33.874749692Z","comments":[{"id":48,"issue_id":"letta-repo-0vw","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T02:48:37Z"}]}
{"id":"letta-repo-0xo","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:33:24.948633529Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:33.373043605Z","comments":[{"id":47,"issue_id":"letta-repo-0xo","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T02:33:25Z"}]}
{"id":"letta-repo-1bm","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T01:57:02.747191701Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:08.044610415Z"}
{"id":"letta-repo-26h","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:01:12.064701576Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:32.7493706Z","comments":[{"id":39,"issue_id":"letta-repo-26h","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T02:01:12Z"}]}
{"id":"letta-repo-27y","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:18:14.589505184Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:31.091343292Z","comments":[{"id":42,"issue_id":"letta-repo-27y","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T02:18:14Z"}]}
{"id":"letta-repo-2k2","title":"Implement webhook settings and SSRF protection","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T00:59:16.893257192Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:16.893257192Z","comments":[{"id":6,"issue_id":"letta-repo-2k2","author":"root","text":"Add global webhook configuration settings and implement SSRF protection for webhook URLs.\n\n**Deliverables:**\n\n- Settings in : global_webhook_enabled, webhook_timeout, webhook_retry_count\n- SSRF protection: block localhost, private IPs, metadata endpoints\n- URL validation and allowlist support\n- Configuration via environment variables\n\n**Dependencies:** None\n\n**Reference:** \n\n---\nHuly Issue: LCORE-3","created_at":"2026-01-02T00:59:17Z"}]}
{"id":"letta-repo-2to","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T03:04:09.45044284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:07.492393063Z"}
{"id":"letta-repo-2yj","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T00:02:56.507709494Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:07.360767528Z","comments":[{"id":21,"issue_id":"letta-repo-2yj","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T00:02:56Z"}]}
{"id":"letta-repo-307","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T04:06:55.670819936Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:30.579751878Z","comments":[{"id":63,"issue_id":"letta-repo-307","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T04:06:55Z"}]}
{"id":"letta-repo-31v","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T02:33:24.479861547Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:07.211720184Z"}
{"id":"letta-repo-3cq","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T03:35:31.567740511Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:06.941957816Z"}
{"id":"letta-repo-3ob","title":"docs(webhooks): Document webhook event types and payload schemas","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T19:59:33.495637768Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:33.495637768Z","comments":[{"id":9,"issue_id":"letta-repo-3ob","author":"root","text":"## Summary\n\nCreate comprehensive documentation for all webhook events including new tool events.\n\n## Required Documentation\n\n### Event Catalog\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eEvent\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eScope\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eTrigger\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePayload\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eagent.run.completed\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAgent\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRun finishes\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003emessages, usage, stop_reason\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003etool.created\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGlobal\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool added\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003etool metadata\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003etool.updated\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGlobal\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool modified\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003echanged fields\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003etool.deleted\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGlobal\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool removed\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003etool_id\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eagent.tool.attached\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAgent\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool bound\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003etool_id, agent_id\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eagent.tool.detached\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAgent\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool unbound\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003etool_id, agent_id\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Payload Schemas\n\n- JSON Schema for each event type\n- Example payloads\n\n### Integration Guide\n\n- How to subscribe to events\n- Signature verification\n- Best practices\n\n## Location\n\n-  or extend existing documentation\n\n---\nHuly Issue: LCORE-13","created_at":"2026-01-02T19:59:33Z"}]}
{"id":"letta-repo-3pg","title":"test(webhooks): Add integration test for AGENT_RUN_COMPLETED message payload","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T19:59:54.861544328Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:54.861544328Z","comments":[{"id":10,"issue_id":"letta-repo-3pg","author":"root","text":"## Summary\n\nAdd integration test to verify webhook payload includes messages array correctly.\n\n## Current Gap\n\nExisting tests cover:\n\n- URL validation\n- Signature generation/verification\n- Delivery retry logic\n- WebhookManager publish flow (mocked)\n\nMissing:\n\n- E2E test that agent run actually fires webhook with messages\n- Verification of message serialization format\n\n## Test Requirements\n\n\n\n## Files\n\n-  or new \n\n---\nHuly Issue: LCORE-11","created_at":"2026-01-02T19:59:55Z"}]}
{"id":"letta-repo-63w","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T02:18:18.339999048Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:06.671844833Z"}
{"id":"letta-repo-6gq","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T00:16:23.825124327Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:06.524975524Z","comments":[{"id":25,"issue_id":"letta-repo-6gq","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T00:16:24Z"}]}
{"id":"letta-repo-6kh","title":"test(webhooks): Add tests for new tool webhook events","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:59:50.482854647Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:50.482854647Z"}
{"id":"letta-repo-6qp","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T01:54:18.722966982Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:06.377380849Z","comments":[{"id":32,"issue_id":"letta-repo-6qp","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T01:54:18Z"}]}
{"id":"letta-repo-75o","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:52:13.973988102Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:28.87757231Z","comments":[{"id":58,"issue_id":"letta-repo-75o","author":"root","text":"Synced from Huly: LCORE-16","created_at":"2026-01-03T03:52:14Z"}]}
{"id":"letta-repo-7fb","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:48:42.049593084Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:28.228646979Z","comments":[{"id":49,"issue_id":"letta-repo-7fb","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T02:48:42Z"}]}
{"id":"letta-repo-7q3","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:33:19.027169772Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:06.247531558Z","comments":[{"id":46,"issue_id":"letta-repo-7q3","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T02:33:19Z"}]}
{"id":"letta-repo-8x6","title":"Create webhook CRUD API endpoints","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T00:59:16.428978385Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:16.428978385Z","comments":[{"id":4,"issue_id":"letta-repo-8x6","author":"root","text":"Implement REST API endpoints for managing agent webhook configurations.\n\n**Deliverables:**\n\n-  - Configure webhooks\n-  - Get webhook config\n-  - Update webhook config\n-  - Disable webhooks\n-  - Test webhook delivery\n- Request/response schemas with validation\n\n**Dependencies:** LCORE-2\n\n**Reference:** \n\n---\nHuly Issue: LCORE-5","created_at":"2026-01-02T00:59:16Z"}]}
{"id":"letta-repo-90o","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:35:20.185266936Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:26.915892159Z","comments":[{"id":55,"issue_id":"letta-repo-90o","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T03:35:20Z"}]}
{"id":"letta-repo-980","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:52:24.965393134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:26.195919755Z","comments":[{"id":60,"issue_id":"letta-repo-980","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T03:52:25Z"}]}
{"id":"letta-repo-bao","title":"feat(webhooks): Implement agent.tool.attached and agent.tool.detached events","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:59:59.838306232Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:59.838306232Z"}
{"id":"letta-repo-ckq","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T01:57:02.30733525Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:05.947270584Z","comments":[{"id":34,"issue_id":"letta-repo-ckq","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T01:57:02Z"}]}
{"id":"letta-repo-d7k","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T04:06:46.307255213Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:05.802997787Z","comments":[{"id":62,"issue_id":"letta-repo-d7k","author":"root","text":"Synced from Huly: LCORE-15","created_at":"2026-01-03T04:06:46Z"}]}
{"id":"letta-repo-dja","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:01:12.418310166Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:05.655623772Z","comments":[{"id":40,"issue_id":"letta-repo-dja","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T02:01:12Z"}]}
{"id":"letta-repo-dm5","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:48:44.537145364Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:05.526775852Z","comments":[{"id":50,"issue_id":"letta-repo-dm5","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T02:48:44Z"}]}
{"id":"letta-repo-dxm","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T03:52:15.035452137Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:05.256201041Z"}
{"id":"letta-repo-fh6","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T04:06:46.880909506Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:05.115024976Z"}
{"id":"letta-repo-ftc","title":"Integrate webhooks into agent execution flow","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T00:59:16.663099657Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:16.663099657Z","comments":[{"id":5,"issue_id":"letta-repo-ftc","author":"root","text":"Add webhook event emission at key points in agent execution: step completion, message handling, tool operations.\n\n**Deliverables:**\n\n- Emit  in \n- Emit  in message handling flow\n- Emit  and  in AgentManager\n- Event filtering based on agent's webhook_events configuration\n- Error handling to prevent webhook failures from breaking agent execution\n\n**Dependencies:** LCORE-1, LCORE-2\n\n**Reference:** \n\n---\nHuly Issue: LCORE-4","created_at":"2026-01-02T00:59:16Z"}]}
{"id":"letta-repo-fw5","title":"Implement Redis-based async webhook delivery","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T00:59:16.20578216Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:16.20578216Z","comments":[{"id":3,"issue_id":"letta-repo-fw5","author":"root","text":"Build async webhook delivery system using Redis streams with retry logic and dead letter queue.\n\n**Deliverables:**\n\n- Redis stream producer in WebhookManager\n- Webhook worker consumer with retry logic (exponential backoff)\n- Dead letter queue for failed deliveries\n- Delivery status tracking\n- Worker process management and graceful shutdown\n- Monitoring metrics (success/failure rates, retry counts)\n\n**Dependencies:** LCORE-1\n\n**Reference:** \n\n---\nHuly Issue: LCORE-6","created_at":"2026-01-02T00:59:16Z"}]}
{"id":"letta-repo-gp5","title":"Write webhook system tests","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T00:59:15.900174313Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:15.900174313Z","comments":[{"id":2,"issue_id":"letta-repo-gp5","author":"root","text":"Create comprehensive unit and integration tests for the webhook system.\n\n**Deliverables:**\n\n- Unit tests for WebhookManager\n- Integration tests for webhook delivery\n- Mock webhook receiver for testing\n- Test coverage for HMAC validation\n- Test coverage for SSRF protection\n- Test coverage for retry logic\n- Test event emission from agent execution\n\n**Dependencies:** LCORE-1, LCORE-4, LCORE-6\n\n**Acceptance Criteria:** \u003e80% code coverage for webhook module\n\n---\nHuly Issue: LCORE-7","created_at":"2026-01-02T00:59:16Z"}]}
{"id":"letta-repo-ieu","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T01:24:37.890769424Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:04.692582414Z","comments":[{"id":28,"issue_id":"letta-repo-ieu","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T01:24:38Z"}]}
{"id":"letta-repo-j1f","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:33:18.574984644Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:23.335418858Z","comments":[{"id":45,"issue_id":"letta-repo-j1f","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T02:33:18Z"}]}
{"id":"letta-repo-jby","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:18:17.886740975Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:04.549291172Z","comments":[{"id":44,"issue_id":"letta-repo-jby","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T02:18:18Z"}]}
{"id":"letta-repo-jcq","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T04:06:45.547764056Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:22.47158515Z","comments":[{"id":61,"issue_id":"letta-repo-jcq","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T04:06:45Z"}]}
{"id":"letta-repo-k3b","title":"Add webhook fields to Agent ORM model","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T00:59:17.230887059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:17.230887059Z","comments":[{"id":7,"issue_id":"letta-repo-k3b","author":"root","text":"Extend the Agent model with webhook configuration fields and create database migration.\n\n**Deliverables:**\n\n- Add fields to : webhook_url, webhook_secret, webhook_events, webhook_enabled\n- Alembic migration script for schema changes\n- Update AgentState Pydantic model\n- Webhook secret encryption at rest\n\n**Dependencies:** None\n\n**Reference:** \n\n---\nHuly Issue: LCORE-2","created_at":"2026-01-02T00:59:17Z"}]}
{"id":"letta-repo-k4w","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T01:58:52.966609605Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:21.940566242Z","comments":[{"id":38,"issue_id":"letta-repo-k4w","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T01:58:53Z"}]}
{"id":"letta-repo-k84","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:52:14.558426648Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:04.407768229Z","comments":[{"id":59,"issue_id":"letta-repo-k84","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T03:52:14Z"}]}
{"id":"letta-repo-lpm","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T04:24:22.374254571Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:18.971406826Z","comments":[{"id":64,"issue_id":"letta-repo-lpm","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T04:24:22Z"}]}
{"id":"letta-repo-lqe","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:18:16.422823884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:18.441973438Z","comments":[{"id":43,"issue_id":"letta-repo-lqe","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T02:18:16Z"}]}
{"id":"letta-repo-m5l","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T02:48:45.458924488Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:04.032122037Z"}
{"id":"letta-repo-mll","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T02:01:12.789859284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:03.888734271Z"}
{"id":"letta-repo-qti","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:04:08.855291475Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:03.627672609Z","comments":[{"id":52,"issue_id":"letta-repo-qti","author":"root","text":"Synced from Huly: LCORE-15","created_at":"2026-01-03T03:04:09Z"}]}
{"id":"letta-repo-s2u","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:36:10.673302389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:16.14720616Z","comments":[{"id":57,"issue_id":"letta-repo-s2u","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T03:36:10Z"}]}
{"id":"letta-repo-sv8","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T01:58:45.799012422Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:15.488930069Z","comments":[{"id":36,"issue_id":"letta-repo-sv8","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T01:58:45Z"}]}
{"id":"letta-repo-syg","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T04:39:17.381408767Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:14.850638111Z","comments":[{"id":65,"issue_id":"letta-repo-syg","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T04:39:17Z"}]}
{"id":"letta-repo-tit","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T01:58:46.903192882Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T01:58:47.083558672Z","closed_at":"2026-01-03T01:58:47.083558672Z","close_reason":"Closed"}
{"id":"letta-repo-v15","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:21:27.129325138Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:13.761142446Z","comments":[{"id":54,"issue_id":"letta-repo-v15","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T03:21:27Z"}]}
{"id":"letta-repo-vfi","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T02:01:31.087738334Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:13.154122248Z","comments":[{"id":41,"issue_id":"letta-repo-vfi","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T02:01:31Z"}]}
{"id":"letta-repo-vt4","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T03:35:20.702746916Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:06:03.213010314Z","comments":[{"id":56,"issue_id":"letta-repo-vt4","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T03:35:20Z"}]}
{"id":"letta-repo-xii","title":"Document webhook system","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T00:59:15.675671166Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:15.675671166Z","comments":[{"id":1,"issue_id":"letta-repo-xii","author":"root","text":"Document the webhook system for developers and users.\n\n**Deliverables:**\n\n- User guide: How to configure webhooks for agents\n- Developer guide: Event types, payload schemas, signature validation\n- API reference: Webhook management endpoints\n- Integration examples: Python, Node.js, Go webhook receivers\n- Troubleshooting guide: Common issues and debugging\n- Security best practices\n\n**Dependencies:** All implementation issues\n\n**Location:** Update  with user-facing documentation\n\n---\nHuly Issue: LCORE-8","created_at":"2026-01-02T00:59:15Z"}]}
{"id":"letta-repo-xm2","title":"Create WebhookManager service foundation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T00:59:17.461370563Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:17.461370563Z","comments":[{"id":8,"issue_id":"letta-repo-xm2","author":"root","text":"Implement the core WebhookManager service with publish_event() API, event validation, HMAC signing, and HTTP delivery.\n\n**Deliverables:**\n\n-  with WebhookManager class\n- Event validation and schema enforcement\n- HMAC signature generation (SHA-256)\n- HTTP POST delivery with timeout handling\n- Basic error handling and logging\n\n**Dependencies:** None\n\n**Reference:** \n\n---\nHuly Issue: LCORE-1","created_at":"2026-01-02T00:59:17Z"}]}
{"id":"letta-repo-ybu","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T01:58:46.373426314Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T01:58:46.676364811Z","closed_at":"2026-01-03T01:58:46.676364811Z","close_reason":"Closed","comments":[{"id":37,"issue_id":"letta-repo-ybu","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T01:58:46Z"}]}
{"id":"letta-repo-zhd","title":"Include user request message in webhook payload","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T01:57:14.595124611Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T05:24:11.601723276Z","comments":[{"id":35,"issue_id":"letta-repo-zhd","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T01:57:14Z"}]}
{"id":"letta-repo-zpf","title":"Include user request message in webhook payload","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T03:04:08.267952297Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T03:04:08.60105872Z","closed_at":"2026-01-03T03:04:08.60105872Z","close_reason":"Closed","comments":[{"id":51,"issue_id":"letta-repo-zpf","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T03:04:08Z"}]}
