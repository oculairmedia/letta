{"id":"letta-repo-03g","title":"feat(webhooks): Add tool.created, tool.updated, tool.deleted webhook events","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T20:00:02.510290609Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:02.510290609Z"}
{"id":"letta-repo-285","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:25:47.038731651Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:25:47.234736807Z","closed_at":"2026-01-02T22:25:47.234736807Z","close_reason":"Closed"}
{"id":"letta-repo-2k2","title":"Implement webhook settings and SSRF protection","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T00:59:16.893257192Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:16.893257192Z","comments":[{"id":6,"issue_id":"letta-repo-2k2","author":"root","text":"Add global webhook configuration settings and implement SSRF protection for webhook URLs.\n\n**Deliverables:**\n\n- Settings in : global_webhook_enabled, webhook_timeout, webhook_retry_count\n- SSRF protection: block localhost, private IPs, metadata endpoints\n- URL validation and allowlist support\n- Configuration via environment variables\n\n**Dependencies:** None\n\n**Reference:** \n\n---\nHuly Issue: LCORE-3","created_at":"2026-01-02T00:59:17Z"}]}
{"id":"letta-repo-2yj","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T00:02:56.507709494Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T00:02:56.836979391Z","closed_at":"2026-01-03T00:02:56.836979391Z","close_reason":"Closed","comments":[{"id":21,"issue_id":"letta-repo-2yj","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T00:02:56Z"}]}
{"id":"letta-repo-395","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T00:03:01.953753926Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T00:03:02.281477556Z","closed_at":"2026-01-03T00:03:02.281477556Z","close_reason":"Closed","comments":[{"id":22,"issue_id":"letta-repo-395","author":"root","text":"Synced from Huly: LCORE-14","created_at":"2026-01-03T00:03:02Z"}]}
{"id":"letta-repo-3o9","title":"Include user request message in webhook payload","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T00:02:28.294298822Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T00:02:28.63982124Z","closed_at":"2026-01-03T00:02:28.63982124Z","close_reason":"Closed","comments":[{"id":19,"issue_id":"letta-repo-3o9","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T00:02:28Z"}]}
{"id":"letta-repo-3ob","title":"docs(webhooks): Document webhook event types and payload schemas","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T19:59:33.495637768Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:33.495637768Z","comments":[{"id":9,"issue_id":"letta-repo-3ob","author":"root","text":"## Summary\n\nCreate comprehensive documentation for all webhook events including new tool events.\n\n## Required Documentation\n\n### Event Catalog\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eEvent\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eScope\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eTrigger\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePayload\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eagent.run.completed\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAgent\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRun finishes\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003emessages, usage, stop_reason\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003etool.created\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGlobal\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool added\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003etool metadata\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003etool.updated\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGlobal\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool modified\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003echanged fields\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003etool.deleted\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGlobal\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool removed\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003etool_id\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eagent.tool.attached\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAgent\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool bound\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003etool_id, agent_id\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eagent.tool.detached\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAgent\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTool unbound\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003etool_id, agent_id\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Payload Schemas\n\n- JSON Schema for each event type\n- Example payloads\n\n### Integration Guide\n\n- How to subscribe to events\n- Signature verification\n- Best practices\n\n## Location\n\n-  or extend existing documentation\n\n---\nHuly Issue: LCORE-13","created_at":"2026-01-02T19:59:33Z"}]}
{"id":"letta-repo-3pg","title":"test(webhooks): Add integration test for AGENT_RUN_COMPLETED message payload","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T19:59:54.861544328Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:54.861544328Z","comments":[{"id":10,"issue_id":"letta-repo-3pg","author":"root","text":"## Summary\n\nAdd integration test to verify webhook payload includes messages array correctly.\n\n## Current Gap\n\nExisting tests cover:\n\n- URL validation\n- Signature generation/verification\n- Delivery retry logic\n- WebhookManager publish flow (mocked)\n\nMissing:\n\n- E2E test that agent run actually fires webhook with messages\n- Verification of message serialization format\n\n## Test Requirements\n\n\n\n## Files\n\n-  or new \n\n---\nHuly Issue: LCORE-11","created_at":"2026-01-02T19:59:55Z"}]}
{"id":"letta-repo-40v","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:23:13.513099902Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:23:13.822800126Z","closed_at":"2026-01-02T22:23:13.822800126Z","close_reason":"Closed","comments":[{"id":11,"issue_id":"letta-repo-40v","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-02T22:23:13Z"}]}
{"id":"letta-repo-4ye","title":"Include user request message in webhook payload","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T00:16:10.760454027Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T00:16:11.146913252Z","closed_at":"2026-01-03T00:16:11.146913252Z","close_reason":"Closed","comments":[{"id":23,"issue_id":"letta-repo-4ye","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T00:16:10Z"}]}
{"id":"letta-repo-6gq","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T00:16:23.825124327Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T00:16:24.158983228Z","closed_at":"2026-01-03T00:16:24.158983228Z","close_reason":"Closed","comments":[{"id":25,"issue_id":"letta-repo-6gq","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-03T00:16:24Z"}]}
{"id":"letta-repo-6kh","title":"test(webhooks): Add tests for new tool webhook events","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:59:50.482854647Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:50.482854647Z"}
{"id":"letta-repo-7rh","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T23:06:22.05050833Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:06:22.332893489Z","closed_at":"2026-01-02T23:06:22.332893489Z","close_reason":"Closed","comments":[{"id":14,"issue_id":"letta-repo-7rh","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-02T23:06:22Z"}]}
{"id":"letta-repo-7rp","title":"Include user request message in webhook payload","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T00:16:21.849837376Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T00:16:22.26996067Z","closed_at":"2026-01-03T00:16:22.26996067Z","close_reason":"Closed","comments":[{"id":24,"issue_id":"letta-repo-7rp","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T00:16:22Z"}]}
{"id":"letta-repo-8x6","title":"Create webhook CRUD API endpoints","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T00:59:16.428978385Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:16.428978385Z","comments":[{"id":4,"issue_id":"letta-repo-8x6","author":"root","text":"Implement REST API endpoints for managing agent webhook configurations.\n\n**Deliverables:**\n\n-  - Configure webhooks\n-  - Get webhook config\n-  - Update webhook config\n-  - Disable webhooks\n-  - Test webhook delivery\n- Request/response schemas with validation\n\n**Dependencies:** LCORE-2\n\n**Reference:** \n\n---\nHuly Issue: LCORE-5","created_at":"2026-01-02T00:59:16Z"}]}
{"id":"letta-repo-bao","title":"feat(webhooks): Implement agent.tool.attached and agent.tool.detached events","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T19:59:59.838306232Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:59.838306232Z"}
{"id":"letta-repo-dsf","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:39:43.043685579Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:43.340548372Z","closed_at":"2026-01-02T22:39:43.340548372Z","close_reason":"Closed","comments":[{"id":13,"issue_id":"letta-repo-dsf","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-02T22:39:43Z"}]}
{"id":"letta-repo-ftc","title":"Integrate webhooks into agent execution flow","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T00:59:16.663099657Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:16.663099657Z","comments":[{"id":5,"issue_id":"letta-repo-ftc","author":"root","text":"Add webhook event emission at key points in agent execution: step completion, message handling, tool operations.\n\n**Deliverables:**\n\n- Emit  in \n- Emit  in message handling flow\n- Emit  and  in AgentManager\n- Event filtering based on agent's webhook_events configuration\n- Error handling to prevent webhook failures from breaking agent execution\n\n**Dependencies:** LCORE-1, LCORE-2\n\n**Reference:** \n\n---\nHuly Issue: LCORE-4","created_at":"2026-01-02T00:59:16Z"}]}
{"id":"letta-repo-fw5","title":"Implement Redis-based async webhook delivery","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T00:59:16.20578216Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:16.20578216Z","comments":[{"id":3,"issue_id":"letta-repo-fw5","author":"root","text":"Build async webhook delivery system using Redis streams with retry logic and dead letter queue.\n\n**Deliverables:**\n\n- Redis stream producer in WebhookManager\n- Webhook worker consumer with retry logic (exponential backoff)\n- Dead letter queue for failed deliveries\n- Delivery status tracking\n- Worker process management and graceful shutdown\n- Monitoring metrics (success/failure rates, retry counts)\n\n**Dependencies:** LCORE-1\n\n**Reference:** \n\n---\nHuly Issue: LCORE-6","created_at":"2026-01-02T00:59:16Z"}]}
{"id":"letta-repo-fxm","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T23:46:18.630160452Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:46:19.048912311Z","closed_at":"2026-01-02T23:46:19.048912311Z","close_reason":"Closed","comments":[{"id":17,"issue_id":"letta-repo-fxm","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-02T23:46:18Z"}]}
{"id":"letta-repo-gp5","title":"Write webhook system tests","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-02T00:59:15.900174313Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:15.900174313Z","comments":[{"id":2,"issue_id":"letta-repo-gp5","author":"root","text":"Create comprehensive unit and integration tests for the webhook system.\n\n**Deliverables:**\n\n- Unit tests for WebhookManager\n- Integration tests for webhook delivery\n- Mock webhook receiver for testing\n- Test coverage for HMAC validation\n- Test coverage for SSRF protection\n- Test coverage for retry logic\n- Test event emission from agent execution\n\n**Dependencies:** LCORE-1, LCORE-4, LCORE-6\n\n**Acceptance Criteria:** \u003e80% code coverage for webhook module\n\n---\nHuly Issue: LCORE-7","created_at":"2026-01-02T00:59:16Z"}]}
{"id":"letta-repo-h26","title":"Include user request message in webhook payload","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T00:02:53.718375954Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T00:02:54.050354225Z","closed_at":"2026-01-03T00:02:54.050354225Z","close_reason":"Closed","comments":[{"id":20,"issue_id":"letta-repo-h26","author":"root","text":"Synced from Huly: LCORE-16","created_at":"2026-01-03T00:02:53Z"}]}
{"id":"letta-repo-h5d","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T00:16:25.244765975Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T00:16:25.434904868Z","closed_at":"2026-01-03T00:16:25.434904868Z","close_reason":"Closed"}
{"id":"letta-repo-k3b","title":"Add webhook fields to Agent ORM model","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T00:59:17.230887059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:17.230887059Z","comments":[{"id":7,"issue_id":"letta-repo-k3b","author":"root","text":"Extend the Agent model with webhook configuration fields and create database migration.\n\n**Deliverables:**\n\n- Add fields to : webhook_url, webhook_secret, webhook_events, webhook_enabled\n- Alembic migration script for schema changes\n- Update AgentState Pydantic model\n- Webhook secret encryption at rest\n\n**Dependencies:** None\n\n**Reference:** \n\n---\nHuly Issue: LCORE-2","created_at":"2026-01-02T00:59:17Z"}]}
{"id":"letta-repo-k5q","title":"Include user request message in webhook payload","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T01:12:52.166865563Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-03T01:12:52.490819322Z","closed_at":"2026-01-03T01:12:52.490819322Z","close_reason":"Closed","comments":[{"id":26,"issue_id":"letta-repo-k5q","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-03T01:12:52Z"}]}
{"id":"letta-repo-pz6","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T23:47:24.169585939Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:47:24.455682235Z","closed_at":"2026-01-02T23:47:24.455682235Z","close_reason":"Closed","comments":[{"id":18,"issue_id":"letta-repo-pz6","author":"root","text":"Synced from Huly: LCORE-14","created_at":"2026-01-02T23:47:24Z"}]}
{"id":"letta-repo-qp4","title":"Include user request message in webhook payload","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T23:46:13.543346751Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:46:13.855316613Z","closed_at":"2026-01-02T23:46:13.855316613Z","close_reason":"Closed","comments":[{"id":16,"issue_id":"letta-repo-qp4","author":"root","text":"Synced from Huly: LCORE-16","created_at":"2026-01-02T23:46:13Z"}]}
{"id":"letta-repo-ryx","title":"fix(webhooks): Consolidate streaming token chunks before sending agent.run.completed webhook","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:39:47.006395565Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:47.19209591Z","closed_at":"2026-01-02T22:39:47.19209591Z","close_reason":"Closed"}
{"id":"letta-repo-vgw","title":"test(webhooks): Add integration tests for webhook message consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:25:43.219670389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:25:43.511962809Z","closed_at":"2026-01-02T22:25:43.511962809Z","close_reason":"Closed","comments":[{"id":12,"issue_id":"letta-repo-vgw","author":"root","text":"## Context\n\nRelated to the webhook streaming chunks consolidation fix. We need comprehensive tests to ensure:\n\n1. Streaming token chunks are properly consolidated before webhook delivery\n2. Non-assistant messages are preserved correctly\n3. Mixed message sequences are handled properly\n4. Edge cases are covered (empty messages, single chunk, etc.)\n\n## Test Cases Needed\n\n### Unit Tests\n\n1. **Basic consolidation**\n   - Input: 5 assistant_message chunks\n   - Expected: 1 consolidated assistant_message\n2. **Mixed messages**\n   - Input: [assistant_chunk, assistant_chunk, tool_call, tool_result, assistant_chunk, assistant_chunk]\n   - Expected: [consolidated_assistant, tool_call, tool_result, consolidated_assistant]\n3. **Non-assistant messages passthrough**\n   - Input: [reasoning_message, tool_call, tool_result]\n   - Expected: Same messages unchanged\n4. **Single message**\n   - Input: [assistant_message]\n   - Expected: [assistant_message] (unchanged)\n5. **Empty content handling**\n   - Input: [assistant_chunk(\"\"), assistant_chunk(\"text\")]\n   - Expected: [assistant_message(\"text\")]\n\n### Integration Tests\n\n1. **End-to-end streaming webhook**\n   - Run agent in streaming mode\n   - Capture webhook payload\n   - Verify messages are consolidated\n2. **Webhook payload structure**\n   - Verify consolidated messages have correct structure\n   - Verify message_type, content, timestamps preserved\n\n## Files to Create/Modify\n\n-  - Add  class\n- May need mock streaming responses for testing\n\n---\nHuly Issue: LCORE-15","created_at":"2026-01-02T22:25:43Z"}]}
{"id":"letta-repo-xii","title":"Document webhook system","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-02T00:59:15.675671166Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:15.675671166Z","comments":[{"id":1,"issue_id":"letta-repo-xii","author":"root","text":"Document the webhook system for developers and users.\n\n**Deliverables:**\n\n- User guide: How to configure webhooks for agents\n- Developer guide: Event types, payload schemas, signature validation\n- API reference: Webhook management endpoints\n- Integration examples: Python, Node.js, Go webhook receivers\n- Troubleshooting guide: Common issues and debugging\n- Security best practices\n\n**Dependencies:** All implementation issues\n\n**Location:** Update  with user-facing documentation\n\n---\nHuly Issue: LCORE-8","created_at":"2026-01-02T00:59:15Z"}]}
{"id":"letta-repo-xm2","title":"Create WebhookManager service foundation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-02T00:59:17.461370563Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T00:59:17.461370563Z","comments":[{"id":8,"issue_id":"letta-repo-xm2","author":"root","text":"Implement the core WebhookManager service with publish_event() API, event validation, HMAC signing, and HTTP delivery.\n\n**Deliverables:**\n\n-  with WebhookManager class\n- Event validation and schema enforcement\n- HMAC signature generation (SHA-256)\n- HTTP POST delivery with timeout handling\n- Basic error handling and logging\n\n**Dependencies:** None\n\n**Reference:** \n\n---\nHuly Issue: LCORE-1","created_at":"2026-01-02T00:59:17Z"}]}
{"id":"letta-repo-zex","title":"Include user request message in webhook payload","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T23:45:18.539654649Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:45:18.841121021Z","closed_at":"2026-01-02T23:45:18.841121021Z","close_reason":"Closed","comments":[{"id":15,"issue_id":"letta-repo-zex","author":"root","text":"## Problem\n\nCurrently, the  webhook only includes the assistant's response messages, not the user message that triggered the run. This makes it difficult for webhook consumers to correlate responses with their original requests.\n\n**Current behavior:**\n\n\n\n**Expected behavior:**\n\n\n\n## Implementation\n\n1. Modify  in  to include the triggering user message\n2. The user message should be prepended to the response messages list\n3. Update webhook schema/docs if needed\n\n## Acceptance Criteria\n\n- [ ] Webhook payload includes the user message that triggered the run\n- [ ] User message appears first in the messages array\n- [ ] Backward compatible (no breaking changes to existing fields)\n- [ ] Unit tests for webhook payload structure\n- [ ] Integration test verifying user message inclusion\n\n---\nHuly Issue: LCORE-16","created_at":"2026-01-02T23:45:18Z"}]}
